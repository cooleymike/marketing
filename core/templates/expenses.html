{% extends 'base.html' %}

{% block title %}
Expenses
{% endblock %}

{% block content %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>
        <div class="bg-green-100 dark:bg-green-800 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-200 px-4 py-3 rounded relative" role="alert">
            <strong class="font-bold">Success!</strong> <span class="block sm:inline">{{ message }}.</span>
            <span class="absolute top-0 bottom-0 right-0 px-4 py-3">
                <a href="/expenses/" class="close text-green-700 dark:text-green-200 font-bold" aria-label="close">&times;</a>
            </span>
        </div>
    </li>
    {% endfor %}
</ul>
{% endif %}

<div class="container mx-auto p-4">
    {% if expenses %}
    <table class="table-auto w-full mt-5 bg-white dark:bg-gray-800 text-left">
        <thead>
            <tr>
                <th class="px-4 py-2 text-gray-700 dark:text-gray-200">Description</th>
                <th class="px-4 py-2 text-gray-700 dark:text-gray-200">Initial Amount</th>
                <th class="px-4 py-2 text-gray-700 dark:text-gray-200">Created Date</th>
                <th class="px-4 py-2 text-gray-700 dark:text-gray-200">Remaining Budget</th>
            </tr>
        </thead>
        <tbody>
            {% for expense in expenses %}
            <tr class="border-b dark:border-gray-700">
                <td class="px-4 py-2 text-gray-800 dark:text-gray-300">
                    <div class="relative flex w-96 flex-col rounded-lg border border-slate-200 bg-white shadow-sm">
                      <nav class="flex min-w-[240px] flex-col gap-1 p-1.5">
                        <div
                          role="button"
                          class="text-slate-800 flex w-full items-center rounded-md p-3 transition-all hover:bg-slate-100 focus:bg-slate-100 active:bg-slate-100"
                        >
                          <div class="mr-4 grid place-items-center">

                          </div>
                          <div>
                            <h6 class="text-slate-800 font-medium">{{ expense.description }}</h6>  <!-- dynamic description -->
                            <p class="text-slate-500 text-sm">Posted on: {{ expense.created_date }}</p>  <!-- dynamic post date -->
                          </div>
                        </div>
                      </nav>
                    </div>
                </td>

                <td class="px-4 py-2 text-gray-800 dark:text-gray-300">{{ expense.initial_amount }}</td>
                <td class="px-4 py-2 text-gray-800 dark:text-gray-300">{{ expense.created_date }}</td>
                <td class="px-4 py-2 text-gray-800 dark:text-gray-300">{{ expense.remaining_budget }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-gray-700 dark:text-gray-300 mt-4">You have no recorded expenses.</p>
    {% endif %}
    </div>

    <div class="mt-4">
        <a class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded block w-full text-center"
           href="{% url 'expense_form' %}">Create Expense</a>
    </div>


<!--<script>-->
<!--    function animateAvatar(element) {-->
<!--        // Add animation class to the avatar-->
<!--        element.classList.add('transform', 'scale-110', 'transition-transform', 'duration-200');-->

<!--        // Remove the animation class after the animation completes-->
<!--        setTimeout(() => {-->
<!--            element.classList.remove('transform', 'scale-110', 'transition-transform', 'duration-200');-->
<!--        }, 200);-->
<!--    }-->
<!--</script>-->

{% endblock %}
